<!DOCTYPE html>
<html lang="en">


<!-- molla/checkout.html  22 Nov 2019 09:55:06 GMT -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Molla - Bootstrap eCommerce Template</title>
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="Molla - Bootstrap eCommerce Template">
    <meta name="author" content="p-themes">
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/icons/favicon-16x16.png">
    <link rel="manifest" href="assets/images/icons/site.html">
    <link rel="mask-icon" href="assets/images/icons/safari-pinned-tab.svg" color="#666666">
    <link rel="shortcut icon" href="assets/images/icons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="Molla">
    <meta name="application-name" content="Molla">
    <meta name="msapplication-TileColor" content="#cc9966">
    <meta name="msapplication-config" content="assets/images/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!-- Main CSS File -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="/user/css/order/order.css">
<!-- snackbar -->
    <link rel="stylesheet" href="/admin/assets/css/snackbar/snackbar.css">


    
    <!-- Add this in your HTML head section -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- pdf  -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

<!-- Include jsPDF library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- Include jsPDF-AutoTable plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>



<style>

#pay-again {
    background-color: #4CAF50; /* Green background */
    color: white; /* White text */
    padding: 15px 32px; /* Padding for the button */
    font-size: 16px; /* Font size */
    border: none; /* Remove border */
    border-radius: 5px; /* Rounded corners */
    cursor: pointer; /* Pointer cursor on hover */
    transition: background-color 0.3s ease; /* Smooth transition for background color */
}

#pay-again:hover {
    background-color: #45a049; /* Darker green on hover */
}

</style>
<style>

    /* Modal container */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
}

/* Modal content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  max-width: 500px;
}

/* Close button */
.close {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}

/* Confirm cancel button */
.confirm-cancel-button {
  background-color: red;
  color: white;
  border: none;
  padding: 10px 20px;
  cursor: pointer;
}

.confirm-cancel-button:hover {
  background-color: darkred;
}

</style>



<style>
    /* Existing styles */
.cancel-button, .return-button ,.cancel-btn{
    background-color: #f44336; /* Red color for cancellation */
    color: white;
    border: none;
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 4px;
}

.cancel-button:hover {
    background-color: #c62828;
}

.orders-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.order-box {
    display: flex;
    gap: 1rem;
    border: 1px solid #ddd;
    padding: 1rem;
    border-radius: 5px;
    background-color: #fff;
}

.order-details {
    flex: 1;
}

.order-status {
    margin-top: 1rem;
}

.status {
    display: flex;
    gap: 1rem;
}

.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}

.step .circle {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background-color: #ddd;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
}

.step .label {
    margin-top: 0.5rem;
    font-weight: bold;
}

.step .date {
    margin-top: 0.5rem;
    color: #666;
}

.step.confirmed .circle {
    background-color: #5cb85c; /* Orange for confirmed */
}

.step.shipped .circle {
    background-color:  #5cb85c; /* Blue for shipped */
}

.step.delivered .circle {
    background-color: #5cb85c; /* Green for delivered */
}



/* New styles for shipping address */
/* Container for the shipping address */

.shipping-address-container {
  width: 78%;
  margin: 0 auto;
  padding: 20px;
  box-sizing: border-box;
}

.flex-container {
  display: flex;
  justify-content: space-between;
  gap: 20px; /* Space between columns */
  padding: 15px;
  background-color: #f9f9f9;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.column {
  flex: 1;
  padding: 10px;
}

.column h3 {
  margin-bottom: 10px;
  font-size: 18px;
  color: #333;
}

.column p {
  margin: 5px 0;
  font-size: 16px;
}

#pay-again, #invoice-button {
  background-color: #4CAF50;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-top: 10px;
}

#pay-again:hover {
  background-color: #45a049;
}

#invoice-button {
  background-color: #007BFF;
  margin-left: 240px;
}

#invoice-button:hover {
  background-color: #0056b3;
}

</style>

    <style>
.orders-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.order-box {
    display: flex;
    gap: 1rem;
    border: 1px solid #ddd;
    padding: 1rem;
    border-radius: 5px;
    background-color: #fff;
}

.order-details {
    flex: 1;
}

.order-status {
    margin-top: 1rem;
}

.status {
    display: flex;
    gap: 1rem;
}

.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}

.step .circle {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background-color: #ddd;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
}

.step .label {
    margin-top: 0.5rem;
    font-weight: bold;
}

.step .date {
    margin-top: 0.5rem;
    color: #666;
}

.step.confirmed .circle {
    background-color: #f0ad4e; /* Orange for confirmed */
}

.step.shipped .circle {
    background-color: #5bc0de; /* Blue for shipped */
}

.step.delivered .circle {
    background-color: #5cb85c; /* Green for delivered */
}

    </style>


</head>

<body>
    <div id="snackbar"></div>
    <div class="page-wrapper">
        <header class="header">
            <div class="header-top">
                <div class="container">
                    <div class="header-left">
                        <div class="header-dropdown">
                            <!-- <a href="#"></a> -->
                            <div class="header-menu">
                                <ul>
                                 
                                </ul>
                            </div><!-- End .header-menu -->
                        </div><!-- End .header-dropdown -->

                        <div class="header-dropdown">
                            <!-- <a href="#">Eng</a> -->
                            <div class="header-menu">
                                <ul>
                                 
                                </ul>
                            </div><!-- End .header-menu -->
                        </div><!-- End .header-dropdown -->
                    </div><!-- End .header-left -->

                    <div class="header-right">
                        <ul class="top-menu">
                            <li>
                                <!-- <a href="#">Links</a> -->
                                <ul>
                                    <!-- <li><a href="tel:#"><i class="icon-phone"></i>Call: +0123 456 789</a></li> -->
                                    <!-- <li><a href="/wishlist"><i class="icon-heart-o"></i>
                                            <span> </span></a></li> -->
                                    <!-- <li><a href="about.html">About Us</a></li>
                                    <li><a href="contact.html">Contact Us</a></li>
                                    <li><a href="#signin-modal" data-toggle="modal"><i class="icon-user"></i>Login</a> -->
                                    </li>
                                </ul>
                            </li>
                        </ul><!-- End .top-menu -->
                    </div><!-- End .header-right -->
                </div><!-- End .container -->
            </div><!-- End .header-top -->

            <div class="header-middle sticky-header">
                <div class="container">
                    <div class="header-left">
                        <button class="mobile-menu-toggler">
                            <span class="sr-only">Toggle mobile menu</span>
                            <i class="icon-bars"></i>
                        </button>

                        <a href="/shops" class="logo">
                            <img src="assets/images/logo.png" alt="Molla Logo" width="180" height="45">
                        </a>

                        <nav class="main-nav">
                            <ul class="menu sf-arrows">
                                <li class="megamenu-container active">
                                    <a href="/" class="sf-with-ul">Home</a>

                                </li>
                                <li>
                                    <a href="/shops" class="sf-with-ul">Shop</a>

                                    
                                </li>
                                
                               
                               
                                
                            </ul><!-- End .menu -->
                        </nav><!-- End .main-nav -->
                    </div><!-- End .header-left -->

                    <div class="header-right">
                        <!-- <div class="header-search">
                            <a href="#" class="search-toggle" role="button" title="Search"><i
                                    class="icon-search"></i></a>
                            <form action="#" method="get">
                                <div class="header-search-wrapper">
                                    <label for="q" class="sr-only">Search</label>
                                    <input type="search" class="form-control" name="q" id="q" placeholder="Search in..."
                                        required>
                                </div>
                            </form>
                        </div> -->
                        <div class="dropdown cart-dropdown">
                            <a href="/wishlist" class="wishlist-link">
                                <i class="icon-heart-o"></i> </a>
                            </div>

                        <div class="dropdown cart-dropdown">
                            
                            <a href="/cart" class="wishlist-link">
                                <i   class="icon-shopping-cart"></i>
                                <!-- <span class="cart-count">2</span> -->
                                <!-- <span class="cart-txt">$ 164,00</span> -->
                            </a>

                        </div><!-- End .cart-dropdown -->

                       
                        
                    </div><!-- End .header-right -->
                </div><!-- End .container -->
            </div><!-- End .header-middle -->
        </header><!-- End .header -->

        <main class="main">
            <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
                <div class="container">
                    <h1 class="page-title">Order<span>Shop</span></h1>
                </div><!-- End .container -->
            </div><!-- End .page-header -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                        <li class="breadcrumb-item"><a href="/shops">Shop</a></li>
                        <li class="breadcrumb-item active" aria-current="page"> <a href="/order-history">Orders</a></li>
                        <% if (orders) { %>

                        <li class="breadcrumb-item active" aria-current="page"> <%= orders[0].orderId %></li>
                        <% } %>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->


            
           

            <div class="orders-and-address-container" id="invoice">

                <div class="shipping-address-container">  <!--  starting address-->
                    <% if (orders) { %>
                      <% orders.forEach((order) => { %>
                      
                      <!-- Flex Row Container -->
                      <div class="row flex-container">
                        <!-- Column 1: Shipping Address -->
                        <div class="shipping-address column">
                          <h3>Shipping Address</h3>
                          <% order.shippingAddress.forEach(address => { %>
                            <p><%= address.name %></p>
                            <p><%= address.address %></p>
                            <% if(address.district) { %>
                              <p><%= address.district %></p>
                            <% } %>
                            <p><%= address.state %>, <%= address.pincode %></p>
                          <% }) %>
                        </div>
                  
                        <!-- Column 2: Payment Method -->
                        <div class="payment-method column">
                          <h3>Payment Method </h3>
                          <p><%= orders[0].paymentMethod %></p>
                          <% if (orders[0].paymentStatus === 'Pending') { %>
                            <p>Payment is pending</p>
                            <p > Total Amount :<%= orders[0].totalAmount %></p>
                            <p>
                              Pay again? 
                              <button id="pay-again" value="<%= orders[0]._id %>">Pay</button>
                            </p>
                          <% }else{%>
                            <p> Total Amount :<%= orders[0].totalAmount %></p>
                            <% } %>
                        </div>
                  
                        <!-- Column 3: Invoice Button -->
                        <div class="invoice-button-container column">
                            <% let invoiceDisplayed = false; %> <!-- Flag to track if the button is already displayed -->
                            <% order.orderedItems.forEach(item => { %>
                              <% if (item.orderStatus === 'Delivered' && !invoiceDisplayed) { %>
                                <button id="invoice-button">Invoice</button>
                                <% invoiceDisplayed = true; %> <!-- Set the flag to true after displaying the button -->
                              <% } %>
                            <% }) %>
                          </div>
                          
                      </div>


                      <div class="orderdetails column"  hidden>
                        
                        <% order.orderedItems.forEach(item => { %>
                            <% if(item.orderStatus === 'Delivered') { %>

                            <h2><%= item.productName %></h2>
                            <p><%= item.color %></p>
                            <p><%= item.size %></p>
                            <p><%= item.quantity %></p>
                            <p><%= item.price %></p>
                            <p><%= 0 %></p>
                            <p><%= item.quantity * item.price %></p>
                            <p><%= item.quantity * item.price %> </p>
                            <p>0</p>
                            <p><%= item.quantity * item.price %> </p>

                            <% } %>
                        
                        <% }) %>
                      </div>
                    </div>
                      
                      <% }) %>
                    <% } %>
                  </div>
                  
                   <!-- end of address details -->

                
                <div class="orders-container">
                    <% if (orders) { %>
                      <% orders.forEach((order) => { %>
                        <% order.orderedItems.forEach(item => { %>
                          <div class="order-box" id="order-box-<%= item._id %>">
                            <img src="<%= item.variantDetails.images[0] %>" alt="Product Image">
                            <div class="order-details">
                              <h2><%= item.productName %></h2>
                              <p>Total : <span class="price">₹<%= (item.price) * (item.quantity ) %></span></p>
                              
                              <p> <b>Price: ₹<%= item.price %></b></p> 
                              <p>Quantity: <%= item.quantity %></p>

                              <p> Size: <%= item.size %></p>
                            </div>          
                            <!-- Order Status for each product -->
                            <% if (item.orderStatus === 'Confirmed' || item.orderStatus === 'Shipped' || item.orderStatus === 'Delivered' ) { %> 

                            <div class="order-status-<%= item._id %>" >
                              <div class="status"  id="status<%= item._id %>" >
                                <div class="step <%= item.orderStatus === 'Confirmed' || item.orderStatus === 'Shipped' || item.orderStatus === 'Delivered' ? 'confirmed' : '' %>">
                                  <div class="circle">1</div>
                                  <div class="label">Confirmed</div>
                                  <div class="date"><%= order.confirmedDate %></div>
                                </div>
                                <div class="step <%= item.orderStatus === 'Shipped' || item.orderStatus === 'Delivered' ? 'shipped' : '' %>">
                                  <div class="circle">2</div>
                                  <div class="label">Shipped</div>
                                  <div class="date"><%= order.shippedDate %></div>
                                </div>
                                <div class="step <%= item.orderStatus === 'Delivered' ? 'delivered' : '' %>">
                                  <div class="circle">3</div>
                                  <div class="label">Delivered</div>
                                  <div class="date"><%= order.deliveredDate %></div>
                                </div>
                                <!-- <div class="step <%= item.orderStatus === 'Canceled' ? 'canceled' : '' %>">
                                  <div class="circle">4</div>
                                  <div class="label">Canceled</div>
                                  <div class="date"><%= order.canceledDate %></div>
                                </div> -->
                              </div>
                            </div>
                            
                            <% } %>
                           
                            <!-- Cancel or Return Order Button -->
                            <% if (item.orderStatus === 'Delivered') { %>
                                <button type="button" class="return-button" onclick="showReturnModal('<%= item._id %>')">Return Order</button>
                              <% } else if (item.orderStatus === 'Canceled'  || item.orderStatus === 'Returned' ) { %>
                                <button type="button" class="cancel-btn" disabled>Order Canceled</button>
                              <% } else { %>
                                <button type="button" class="cancel-button" onclick="showCancelModal('<%= item._id %>')">Cancel Order</button>
                              <% } %>
                              
                          </div>
                        <% }) %>
                      <% }) %>
                    <% } else { %>
                      <h3>There is no order history</h3>
                    <% } %>
                  </div>

                  <div class="orders-container">
                    <a href="/shops" class="btn btn-outline-dark-2"><span>Continue Shopping</span><i class="icon-refresh"></i></a>                    
                </div>
                
                        
            </div>
            




          <!-- Modal Structure -->
<div id="cancelModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeCancelModal()">&times;</span>
      <!-- <h2>Cancel Order</h2> -->
      <p>Please provide a reason for cancellation:</p>
      <textarea id="cancelReason" placeholder="Enter your reason here..."></textarea>
      <button type="button" class="confirm-cancel-button" onclick="confirmCancellation('')">Submit</button>
    </div>
  </div>


  <div id="returnModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeReturnModal()">&times;</span>
      <!-- <h2>Cancel Order</h2> -->
      <p>Please provide a reason for cancellation:</p>
      <textarea id="returnReaseon" placeholder="Enter your reason here..."></textarea>
      <button type="button" class="confirm-cancel-button" onclick="confirmReturn('')">Submit</button>
    </div>
  </div>
              
              
              




















            
        <footer class="footer">
            <div class="footer-middle">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-6 col-lg-3">
                            <div class="widget widget-about">
                                <img src="assets/images/logo.png" class="footer-logo" alt="Footer Logo" width="105"
                                    height="25">
                                <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate
                                    magna eros eu erat. </p>

                                <div class="social-icons">
                                    <a href="#" class="social-icon" target="_blank" title="Facebook"><i
                                            class="icon-facebook-f"></i></a>
                                    <a href="#" class="social-icon" target="_blank" title="Twitter"><i
                                            class="icon-twitter"></i></a>
                                    <a href="#" class="social-icon" target="_blank" title="Instagram"><i
                                            class="icon-instagram"></i></a>
                                    <a href="#" class="social-icon" target="_blank" title="Youtube"><i
                                            class="icon-youtube"></i></a>
                                    <a href="#" class="social-icon" target="_blank" title="Pinterest"><i
                                            class="icon-pinterest"></i></a>
                                </div><!-- End .soial-icons -->
                            </div><!-- End .widget about-widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="about.html">About Molla</a></li>
                                    <li><a href="#">How to shop on Molla</a></li>
                                    <li><a href="#">FAQ</a></li>
                                    <li><a href="contact.html">Contact us</a></li>
                                    <li><a href="login.html">Log in</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="#">Payment Methods</a></li>
                                    <li><a href="#">Money-back guarantee!</a></li>
                                    <li><a href="#">Returns</a></li>
                                    <li><a href="#">Shipping</a></li>
                                    <li><a href="#">Terms and conditions</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="#">Sign In</a></li>
                                    <li><a href="cart.html">View Cart</a></li>
                                    <li><a href="#">My Wishlist</a></li>
                                    <li><a href="#">Track My Order</a></li>
                                    <li><a href="#">Help</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-6 col-lg-3 -->
                    </div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .footer-middle -->

            <div class="footer-bottom">
                <div class="container">
                    <p class="footer-copyright">Copyright © 2019 Molla Store. All Rights Reserved.</p>
                    <!-- End .footer-copyright -->
                    <figure class="footer-payments">
                        <img src="assets/images/payments.png" alt="Payment methods" width="272" height="20">
                    </figure><!-- End .footer-payments -->
                </div><!-- End .container -->
            </div><!-- End .footer-bottom -->
        </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

    <div class="mobile-menu-container">
        <div class="mobile-menu-wrapper">
            <span class="mobile-menu-close"><i class="icon-close"></i></span>

            <!-- <form action="#" method="get" class="mobile-search">
                <label for="mobile-search" class="sr-only">Search</label>
                <input type="search" class="form-control" name="mobile-search" id="mobile-search"
                    placeholder="Search in..." required>
                <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
            </form> -->

            <nav class="mobile-nav">
                <ul class="mobile-menu">
                    <li class="active">
                        <a href="/">Home</a>

                        <ul>
                            <li><a href="index-1.html">01 - furniture store</a></li>
                            <li><a href="index-2.html">02 - furniture store</a></li>
                            <li><a href="index-3.html">03 - electronic store</a></li>
                            <li><a href="index-4.html">04 - electronic store</a></li>
                            <li><a href="index-5.html">05 - fashion store</a></li>
                            <li><a href="index-6.html">06 - fashion store</a></li>
                            <li><a href="index-7.html">07 - fashion store</a></li>
                            <li><a href="index-8.html">08 - fashion store</a></li>
                            <li><a href="index-9.html">09 - fashion store</a></li>
                            <li><a href="index-10.html">10 - shoes store</a></li>
                            <li><a href="index-11.html">11 - furniture simple store</a></li>
                            <li><a href="index-12.html">12 - fashion simple store</a></li>
                            <li><a href="index-13.html">13 - market</a></li>
                            <li><a href="index-14.html">14 - market fullwidth</a></li>
                            <li><a href="index-15.html">15 - lookbook 1</a></li>
                            <li><a href="index-16.html">16 - lookbook 2</a></li>
                            <li><a href="index-17.html">17 - fashion store</a></li>
                            <li><a href="index-18.html">18 - fashion store (with sidebar)</a></li>
                            <li><a href="index-19.html">19 - games store</a></li>
                            <li><a href="index-20.html">20 - book store</a></li>
                            <li><a href="index-21.html">21 - sport store</a></li>
                            <li><a href="index-22.html">22 - tools store</a></li>
                            <li><a href="index-23.html">23 - fashion left navigation store</a></li>
                            <li><a href="index-24.html">24 - extreme sport store</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/shops">Shop</a>
                        <ul>
                            <li><a href="category-list.html">Shop List</a></li>
                            <li><a href="category-2cols.html">Shop Grid 2 Columns</a></li>
                            <li><a href="category.html">Shop Grid 3 Columns</a></li>
                            <li><a href="category-4cols.html">Shop Grid 4 Columns</a></li>
                            <li><a href="category-boxed.html"><span>Shop Boxed No Sidebar<span
                                            class="tip tip-hot">Hot</span></span></a></li>
                            <li><a href="category-fullwidth.html">Shop Fullwidth No Sidebar</a></li>
                            <li><a href="product-category-boxed.html">Product Category Boxed</a></li>
                            <li><a href="product-category-fullwidth.html"><span>Product Category Fullwidth<span
                                            class="tip tip-new">New</span></span></a></li>
                            <li><a href="cart.html">Cart</a></li>
                            <li><a href="checkout.html">Checkout</a></li>
                            <li><a href="wishlist.html">Wishlist</a></li>
                            <li><a href="#">Lookbook</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="product.html" class="sf-with-ul">Product</a>
                        <ul>
                            <li><a href="product.html">Default</a></li>
                            <li><a href="product-centered.html">Centered</a></li>
                            <li><a href="product-extended.html"><span>Extended Info<span
                                            class="tip tip-new">New</span></span></a></li>
                            <li><a href="product-gallery.html">Gallery</a></li>
                            <li><a href="product-sticky.html">Sticky Info</a></li>
                            <li><a href="product-sidebar.html">Boxed With Sidebar</a></li>
                            <li><a href="product-fullwidth.html">Full Width</a></li>
                            <li><a href="product-masonry.html">Masonry Sticky Info</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Pages</a>
                        <ul>
                            <li>
                                <a href="about.html">About</a>

                                <ul>
                                    <li><a href="about.html">About 01</a></li>
                                    <li><a href="about-2.html">About 02</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="contact.html">Contact</a>

                                <ul>
                                    <li><a href="contact.html">Contact 01</a></li>
                                    <li><a href="contact-2.html">Contact 02</a></li>
                                </ul>
                            </li>
                            <li><a href="login.html">Login</a></li>
                            <li><a href="faq.html">FAQs</a></li>
                            <li><a href="404.html">Error 404</a></li>
                            <li><a href="coming-soon.html">Coming Soon</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="blog.html">Blog</a>

                        <ul>
                            <li><a href="blog.html">Classic</a></li>
                            <li><a href="blog-listing.html">Listing</a></li>
                            <li>
                                <a href="#">Grid</a>
                                <ul>
                                    <li><a href="blog-grid-2cols.html">Grid 2 columns</a></li>
                                    <li><a href="blog-grid-3cols.html">Grid 3 columns</a></li>
                                    <li><a href="blog-grid-4cols.html">Grid 4 columns</a></li>
                                    <li><a href="blog-grid-sidebar.html">Grid sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Masonry</a>
                                <ul>
                                    <li><a href="blog-masonry-2cols.html">Masonry 2 columns</a></li>
                                    <li><a href="blog-masonry-3cols.html">Masonry 3 columns</a></li>
                                    <li><a href="blog-masonry-4cols.html">Masonry 4 columns</a></li>
                                    <li><a href="blog-masonry-sidebar.html">Masonry sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Mask</a>
                                <ul>
                                    <li><a href="blog-mask-grid.html">Blog mask grid</a></li>
                                    <li><a href="blog-mask-masonry.html">Blog mask masonry</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Single Post</a>
                                <ul>
                                    <li><a href="single.html">Default with sidebar</a></li>
                                    <li><a href="single-fullwidth.html">Fullwidth no sidebar</a></li>
                                    <li><a href="single-fullwidth-sidebar.html">Fullwidth with sidebar</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="elements-list.html">Elements</a>
                        <ul>
                            <li><a href="elements-products.html">Products</a></li>
                            <li><a href="elements-typography.html">Typography</a></li>
                            <li><a href="elements-titles.html">Titles</a></li>
                            <li><a href="elements-banners.html">Banners</a></li>
                            <li><a href="elements-product-category.html">Product Category</a></li>
                            <li><a href="elements-video-banners.html">Video Banners</a></li>
                            <li><a href="elements-buttons.html">Buttons</a></li>
                            <li><a href="elements-accordions.html">Accordions</a></li>
                            <li><a href="elements-tabs.html">Tabs</a></li>
                            <li><a href="elements-testimonials.html">Testimonials</a></li>
                            <li><a href="elements-blog-posts.html">Blog Posts</a></li>
                            <li><a href="elements-portfolio.html">Portfolio</a></li>
                            <li><a href="elements-cta.html">Call to Action</a></li>
                            <li><a href="elements-icon-boxes.html">Icon Boxes</a></li>
                        </ul>
                    </li>
                </ul>
            </nav><!-- End .mobile-nav -->

            <div class="social-icons">
                <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
            </div><!-- End .social-icons -->
        </div><!-- End .mobile-menu-wrapper -->
    </div><!-- End .mobile-menu-container -->

    <!-- Sign in / Register Modal -->
    <div class="modal fade" id="signin-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="icon-close"></i></span>
                    </button>

                    <div class="form-box">
                        <div class="form-tab">
                            <ul class="nav nav-pills nav-fill" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="signin-tab" data-toggle="tab" href="#signin"
                                        role="tab" aria-controls="signin" aria-selected="true">Sign In</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="register-tab" data-toggle="tab" href="#register" role="tab"
                                        aria-controls="register" aria-selected="false">Register</a>
                                </li>
                            </ul>
                            <div class="tab-content" id="tab-content-5">
                                <div class="tab-pane fade show active" id="signin" role="tabpanel"
                                    aria-labelledby="signin-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="singin-email">Username or email address *</label>
                                            <input type="text" class="form-control" id="singin-email"
                                                name="singin-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="singin-password">Password *</label>
                                            <input type="password" class="form-control" id="singin-password"
                                                name="singin-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>LOG IN</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input"
                                                    id="signin-remember">
                                                <label class="custom-control-label" for="signin-remember">Remember
                                                    Me</label>
                                            </div><!-- End .custom-checkbox -->

                                            <a href="#" class="forgot-link">Forgot Your Password?</a>
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                                <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="register-email">Your email address *</label>
                                            <input type="email" class="form-control" id="register-email"
                                                name="register-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="register-password">Password *</label>
                                            <input type="password" class="form-control" id="register-password"
                                                name="register-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>SIGN UP</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="register-policy"
                                                    required>
                                                <label class="custom-control-label" for="register-policy">I agree to the
                                                    <a href="#">privacy policy</a> *</label>
                                            </div><!-- End .custom-checkbox -->
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login  btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                            </div><!-- End .tab-content -->
                        </div><!-- End .form-tab -->
                    </div><!-- End .form-box -->
                </div><!-- End .modal-body -->
            </div><!-- End .modal-content -->
        </div><!-- End .modal-dialog -->
    </div><!-- End .modal -->

 <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script src="/socket.io/socket.io.js"></script>  
<script>



// Show the modal when the cancel button is clicked
function showCancelModal(orderId) {
    document.getElementById('cancelModal').style.display = 'block';
    // Store the order ID for later use
    document.getElementById('cancelModal').dataset.orderId = orderId;
}

// Close the modal
function closeCancelModal() {
    document.getElementById('cancelModal').style.display = 'none';
}

// Confirm cancellation
function confirmCancellation() {
    var reason = document.getElementById('cancelReason').value;
    var orderId = document.getElementById('cancelModal').dataset.orderId;

    if (reason.trim() === "") {
        alert("Please provide a reason for cancellation.");
        return;
    }

    // Close the modal
    closeCancelModal();

    // Proceed with the cancellation (you can send the reason to the server)
    cancelOrder(orderId, reason);
}



// cancel reason.. 
async function cancelOrder(itemId, reason) {

  // Show SweetAlert confirmation
  const result = await Swal.fire({
    title: 'Are you sure?',
    text: "Do you want to cancel this order?",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Yes, cancel it!'
  });

  if (result.isConfirmed) {
    try {
      const response = await fetch('/cancel-order', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ itemId ,reason})
      });

      const data = await response.json();
      if (data.success) {
        Swal.fire('Canceled!', 'Your order has been canceled.', 'success');
        
        // Hide the order status
        const orderBox = document.getElementById(`order-box-${itemId}`);
        if (orderBox) {
          const orderStatus = orderBox.querySelector(`.order-status-${itemId}`); //.order-status
        
          if (orderStatus) {
            orderStatus.style.display = 'none';
            
          }
           // Change the button innerHTML to "Order Cancelled"
           const cancelButton = orderBox.querySelector('.cancel-button');
        //    const orderStatus = document.getElementById('order-status-')
       


          if (cancelButton) {
            cancelButton.innerHTML = 'Order Cancelled';
            cancelButton.disabled = true;
          }
        }
      } else {
        Swal.fire('Error!', 'Failed to cancel the order. Please try again.', 'error');
      }
    } catch (error) {
      console.error('Error:', error);
      Swal.fire('Error!', 'Failed to cancel the order. Please try again.', 'error');
    }
  }
}






// Show the modal when the cancel button is clicked
function showReturnModal(orderId) {
    document.getElementById('returnModal').style.display = 'block';
    // Store the order ID for later use
    document.getElementById('returnModal').dataset.orderId = orderId;
}

// Close the modal
function closeReturnModal() {
    document.getElementById('returnModal').style.display = 'none';
}

// Confirm cancellation
function confirmReturn() {
    var reason = document.getElementById('returnReaseon').value;
    var orderId = document.getElementById('returnModal').dataset.orderId;

    if (reason.trim() === "") {
        alert("Please provide a reason for cancellation.");
        return;
    }

    // Close the modal
    closeReturnModal();

    // Proceed with the cancellation (you can send the reason to the server)
    returnOrder(orderId, reason);

}





async function returnOrder(itemId,reason) {
  // Show SweetAlert confirmation
  const result = await Swal.fire({
    title: 'Are you sure?',
    text: "Do you want to return this order?",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Yes, return it!'
  });

  if (result.isConfirmed) {
    try {
      const response = await fetch('/return-order', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ itemId ,reason})
      });

      const data = await response.json();
      if (data.success) {
        Swal.fire('Returned!', 'Your order has been returned.', 'success');


        // Hide order status 

        const orderBox = document.getElementById(`order-box-${itemId}`)
        if(orderBox){
            const orderStatus = orderBox.querySelector(`.order-status-${itemId}`); 
            if(orderStatus){
                orderStatus.style.display = 'none'
            }

           const returnButton = document.querySelector('.return-button')
           if(returnButton){

            returnButton.innerHTML = ' Order Returned'
            returnButton.disabled = true;
           }
        }
      } else {
        Swal.fire('Error!', 'Failed to return the order. Please try again.', 'error');
      }
    } catch (error) {
      console.error('Error:', error);
      Swal.fire('Error!', 'Failed to return the order. Please try again.', 'error');
    }
  }
}



</script>

<!-- Socket.io Client Script -->
<script src="/socket.io/socket.io.js"></script>
<script>

const socket = io();

socket.on('orderStatusUpdate', (data) => {
  const { itemId, status, canceledDate, returnedDate } = data;
  const orderBox = document.getElementById(`order-box-${itemId}`);

  if (orderBox) {
    // Update the order status UI based on the new status
    const confirmedStep = orderBox.querySelector('.step:nth-child(1)');
    const shippedStep = orderBox.querySelector('.step:nth-child(2)');
    const deliveredStep = orderBox.querySelector('.step:nth-child(3)');
    const canceledStep = orderBox.querySelector('.step:nth-child(4)');
    const returnedStep = orderBox.querySelector('.step:nth-child(5)');

    if (status === 'Confirmed') {
      confirmedStep.classList.add('confirmed');
      shippedStep.classList.remove('shipped');
      deliveredStep.classList.remove('delivered');
      canceledStep.classList.remove('canceled');
      returnedStep.classList.remove('returned');
    } else if (status === 'Shipped') {
      confirmedStep.classList.add('confirmed');
      shippedStep.classList.add('shipped');
      deliveredStep.classList.remove('delivered');
      canceledStep.classList.remove('canceled');
      returnedStep.classList.remove('returned');
    } else if (status === 'Delivered') {
      confirmedStep.classList.add('confirmed');
      shippedStep.classList.add('shipped');
      deliveredStep.classList.add('delivered');
      canceledStep.classList.remove('canceled');
      returnedStep.classList.remove('returned');
    } else if (status === 'Canceled') {
      confirmedStep.classList.remove('confirmed');
      shippedStep.classList.remove('shipped');
      deliveredStep.classList.remove('delivered');
      canceledStep.classList.add('canceled');
      canceledStep.querySelector('.date').textContent = new Date(canceledDate).toLocaleDateString();
    } else if (status === 'Returned') {
      confirmedStep.classList.remove('confirmed');
      shippedStep.classList.remove('shipped');
      deliveredStep.classList.remove('delivered');
      canceledStep.classList.remove('canceled');
      returnedStep.classList.add('returned');
      returnedStep.querySelector('.date').textContent = new Date(returnedDate).toLocaleDateString();
    }
  }
});
</script>




<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
   document.getElementById('pay-again').onclick = function(e) {
    e.preventDefault();
    const orderId = document.getElementById('pay-again').value;

    try {
        fetch(`/payagain?orderId=${orderId}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ orderId: orderId })
        })
        .then(response => response.json())
        .then(data => {
            let options = {
                key: 'rzp_test_CFupm2CPa5lLOi', // Razorpay Key ID
                amount: data.amount * 100, // Amount in paise
                currency: "INR",
                name: 'VESTIDO',
                description: "Test Transaction",
                order_id: data.razorpayOrderId, // Ensure this is the Razorpay order ID
                handler: function(response) {
                    // Ensure all necessary details are logged
                    console.log(response); // Should contain razorpay_order_id, razorpay_payment_id, razorpay_signature
                    console.log(options.amount, 'amount');
                    console.log(data.order_id, 'data.order_id');
                    
                    // Verify the payment
                    verifyPayment(response, data.order_id);
                },
                prefill: {
                    name: "",
                    email: " ",
                    contact: data.phoneNumber
                },
                theme: {
                    color: "#3399cc"
                }
            };
            var rzp1 = new Razorpay(options);
            rzp1.on('payment.failed', async function (response) {
                console.error(response.error);

                // Send a request to update the order status as "payment pending" on payment failure
                await fetch('/updateOrderStatus', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        orderId: data.order_id,
                        status: 'Pending',
                        reason: response.error.description // if needed
                    })
                });

                showSnackBar("Payment failed. Please try again.");
                window.location.href = `/order?orderId=${data.order_id}`;
            });
            rzp1.open();
        })
        .catch(error => {
            console.error('Error:', error);
        });

    } catch (err) {
        console.log(err);
    }
};

async function verifyPayment(paymentDetails, orderId) {
    try {
        const response = await fetch('/payagainverify', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                razorpay_order_id: paymentDetails.razorpay_order_id,
                razorpay_payment_id: paymentDetails.razorpay_payment_id,
                razorpay_signature: paymentDetails.razorpay_signature,
                orderId: orderId
            })
        });

        const data = await response.json();

        if (data.type === 'success') {
            showSnackBar('Payment successful');
            window.location.href = `/order?orderId=${orderId}`;
            // Redirect or update UI as needed
        } else {
            showSnackBar(data.msg);
            window.location.href = `/order?orderId=${orderId}`;
        }
    } catch (err) {
        console.log(err);
        alert("Oops! Something went wrong. Error in verifying payment");
    }
}


</script>


<!--  pdf -->

<!-- <script>
    document.getElementById('invoice-button').addEventListener('click', function() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();



        // Extract content from your div with id 'invoice'
        const invoiceContent = document.getElementById('invoice');

        // Set content for the PDF
        doc.setFontSize(16);
        doc.text('Invoice', 20, 20); // Add title

        // Add Shipping Address
        const shippingAddress = invoiceContent.querySelector('.shipping-address').innerText;
        doc.setFontSize(12);
        doc.text(shippingAddress, 20, 30);

        // Add Payment Method
        const paymentMethod = invoiceContent.querySelector('.payment-method').innerText;
        doc.text(paymentMethod, 20, 50);

        // Add Order Details (you can iterate over items to add more content dynamically)
        const orderDetails = invoiceContent.querySelectorAll('.order-box');
        let yPosition = 70;

        orderDetails.forEach(order => {
            const orderText = order.innerText;
            doc.text(orderText, 20, yPosition);
            yPosition += 20; // Move y-position down for the next order
        });

        // Save the PDF
        doc.save('invoice.pdf');
    });
</script> -->

<script>

document.getElementById('invoice-button').addEventListener('click', function () {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Add title or company info
    doc.setFontSize(18);
    doc.text('VESTIDO', 14, 20);

    doc.setFontSize(12);
    doc.text('VESTIDO PRIVATE LIMITED,', 14, 30);
    doc.text('3rd Floor, Kakancheri, Malappuram, Kerala, 673634', 14, 35);

    // Add order details (hardcoded as example)
    doc.setFontSize(14);
    doc.text('Order ID: OID100000211741SS', 14, 50);
    doc.text('Order Date: 15 August 2024', 14, 55);
    doc.text('Invoice Date: 19 August 2024', 14, 60);

    // Extract and add the shipping address dynamically from the DOM
    const invoiceContent = document.getElementById('invoice');
    const shippingAddress = invoiceContent.querySelector('.shipping-address').innerText.split('\n').map((line, index) => ({
        text: line.trim(),
        x: 14,
        y: 75 + (index * 3) // Spacing out the lines vertically
    }));
    shippingAddress.forEach(line => {
        doc.text(line.text, line.x, line.y);
    });

    // Extract and add the payment method dynamically from the DOM
    const paymentMethod = invoiceContent.querySelector('.payment-method').innerText.split('\n').map((line, index) => ({
        text: line.trim(),
        x: 14,
        y: 105 + (index * 6) // Start below the shipping address
    }));
    paymentMethod.forEach(line => {
        doc.text(line.text, line.x, line.y);
    });

    // Extract order details from the DOM
    const orderDetailsElements = invoiceContent.querySelectorAll('.orderdetails h2, .orderdetails p');
    const rows = [];
    let row = [];

    orderDetailsElements.forEach((element, index) => {
        row.push(element.innerText);
        if ((index + 1) % 10 === 0) { // Assuming there are 10 columns per row
            rows.push(row);
            row = [];
        }
    });

    // Draw the table
    const columns = ['Product', 'Color', 'Size', 'Qty', 'Price', 'Offer', 'Last Price', 'Total Price', 'Discount', 'Last Total'];
    doc.autoTable({
        startY: 125, // Adjust this value to start below the payment method
        head: [columns],
        body: rows,
        theme: 'striped',
        headStyles: { fillColor: [0, 0, 0] }, // Customize the table header color
    });

    // Add the grand total below the table
    const finalY = doc.lastAutoTable.finalY + 10; // Get the Y position after the table
    doc.setFontSize(14);
    doc.text('Grand Total: Rs ' + rows.reduce((sum, row) => sum + parseFloat(row[9].replace('Rs.', '')), 0), 14, finalY);

    // Save the PDF
    doc.save('invoice.pdf');
});

</script>


<!-- <script>

document.getElementById('invoice-button').addEventListener('click', function () {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Add title or company info
    doc.setFontSize(18);
    doc.text('VESTIDO', 14, 20);

    doc.setFontSize(12);
    doc.text('VESTIDO PRIVATE LIMITED,', 14, 30);
    doc.text('3rd Floor, Kakancheri, Malappuram, Kerala, 673634', 14, 35);
    // doc.text('GSTIN: 06AADCG1316B2ZY', 14, 40);

    // Add order details (hardcoded as example)
    doc.setFontSize(14);
    doc.text('Order ID: OID100000211741SS', 14, 50);
    doc.text('Order Date: 15 August 2024', 14, 55);
    doc.text('Invoice Date: 19 August 2024', 14, 60);

    // Extract and add the shipping address dynamically from the DOM
    const invoiceContent = document.getElementById('invoice');
    const shippingAddress = invoiceContent.querySelector('.shipping-address').innerText.split('\n').map((line, index) => ({
        text: line.trim(),
        x: 14,
        y: 75 + (index * 3) // Spacing out the lines vertically
    }));
    shippingAddress.forEach(line => {
        doc.text(line.text, line.x, line.y);
    });

    // Extract and add the payment method dynamically from the DOM
    const paymentMethod = invoiceContent.querySelector('.payment-method').innerText.split('\n').map((line, index) => ({
        text: line.trim(),
        x: 14,
        y: 105 + (index * 6) // Start below the shipping address
    }));
    paymentMethod.forEach(line => {
        doc.text(line.text, line.x, line.y);
    });

    // Order Summary Table (Replace with dynamic values if needed)
    const columns = ['Product', 'Color', 'Size', 'Qty', 'Price', 'Offer', 'Last Price', 'Total Price', 'Discount', 'Last Total'];
    const rows = [
        ['Sleeveless sports hoodie', 'navy blue', 'Small', '1', 'Rs.200', '20%', 'Rs.160', 'Rs.160', 'Rs.0', 'Rs.160']
    ];
    const orderdetails = invoiceContent.querySelector('.orderdetails')


    // Draw the table
    doc.autoTable({
        startY: 125, // Adjust this value to start below the payment method
        head: [columns],
        body: rows,
        theme: 'striped',
        headStyles: { fillColor: [0, 0, 0] }, // Customize the table header color
    });

    // Add the grand total below the table
    const finalY = doc.lastAutoTable.finalY + 10; // Get the Y position after the table
    doc.setFontSize(14);
    doc.text('Grand Total: Rs 160', 14, finalY);

    // Save the PDF
    doc.save('invoice.pdf');
});

</script> -->

<!-- <script>

document.getElementById('invoice-button').addEventListener('click', function() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Add title or company info
    doc.setFontSize(18);
    doc.text('VESTIDO', 14, 20);

    doc.setFontSize(12);
    doc.text('VESTIDO PRIVATE LIMITED,', 14, 30);
    doc.text('3rd Floor, Kakancheri, Malappuram, Kerala, 673634', 14, 35);
    doc.text('GSTIN: 06AADCG1316B2ZY', 14, 40);

    // Add order details (hardcoded as example)
    doc.setFontSize(14);
    doc.text('Order ID: OID100000211741SS', 14, 50);
    doc.text('Order Date: 15 August 2024', 14, 55);
    doc.text('Invoice Date: 19 August 2024', 14, 60);

    const invoiceContent = document.getElementById('invoice');

    const shippingAddress = invoiceContent.querySelector('.shipping-address').innerText;
        doc.setFontSize(12);
        doc.text(shippingAddress, 20, 30);

    // Shipping address
    // const shippingAddress = `
    //   Ship To:
    //   Sukanya
    //   HJGJGKHG,
    //   GHHKJK,
    //   Phone: 7034661335
    // `;

    doc.setFontSize(12);
    doc.text(shippingAddress, 14, 70);

    const paymentMethod = invoiceContent.querySelector('.payment-method').innerText;
    doc.text(paymentMethod, 20, 50);

    // Order Summary Table
    const columns = ['Product', 'Color', 'Size', 'Qty', 'Price', 'Offer', 'Last Price', 'Total Price', 'Discount', 'Last Total'];
    const rows = [
        ['Sleeveless sports hoodie', 'navy blue', 'Small', '1', 'Rs.200', '20%', 'Rs.160', 'Rs.160', 'Rs.0', 'Rs.160']
    ];

    // doc.autoTable({
    //     startY: 100,
    //     head: [columns],
    //     body: rows,
    //     theme: 'striped',
    //     headStyles: { fillColor: [0, 0, 0] }, // Customize the table header color
    // });

    // Add total
    doc.setFontSize(14);
    // doc.text('Grand Total: Rs 160', 14, doc.lastAutoTable.finalY + 10);

    // Save the PDF
    doc.save('invoice.pdf');
});
</script> -->
<script>
    function showSnackBar(text) {
  var x = document.getElementById("snackbar");
  x.innerHTML = text
  x.className = "show";
  setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
}
</script>

        </body>

        </html>